<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Cyber Tycoon Settings</title>
    <style>
        :root { --neon: #00f2ff; --gold: #ffd700; --bg: #050508; --panel: #111122; --btn-grad: linear-gradient(135deg, #00f2ff, #0066ff); }
        .theme-red { --neon: #ff4757; --btn-grad: linear-gradient(135deg, #ff4757, #ff6b81); }
        .theme-yellow { --neon: #ffd700; --btn-grad: linear-gradient(135deg, #ffd700, #ffa502); }
        .theme-matrix { --neon: #2ecc71; --btn-grad: linear-gradient(135deg, #000, #2ecc71); }
        .theme-flame { --neon: #ff6a00; --btn-grad: linear-gradient(135deg, #ff6a00, #ee0979); }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
        body { margin: 0; background: var(--bg); color: white; font-family: 'Segoe UI', sans-serif; user-select: none; touch-action: none; overflow: hidden; height: 100vh; display: flex; flex-direction: column; }
        
        #header { text-align: center; padding: 15px; background: var(--panel); border-bottom: 2px solid var(--neon); position: relative; }
        #money { font-size: 2.5rem; font-weight: bold; color: var(--neon); text-shadow: 0 0 15px var(--neon); }
        #settings-btn { position: absolute; top: 15px; right: 15px; font-size: 1.5rem; cursor: pointer; }

        #click-area { flex: 1.2; display: flex; flex-direction: column; align-items: center; justify-content: center; background: radial-gradient(circle, #101025 0%, #050508 100%); gap: 20px; }
        #prestige-container { width: 85%; height: 14px; background: #1a1a35; border-radius: 10px; overflow: hidden; border: 1px solid #333; }
        #prestige-bar { width: 0%; height: 100%; background: var(--btn-grad); transition: 0.3s; }

        #main-btn { width: 150px; height: 150px; background: var(--btn-grad); border-radius: 50%; border: 6px solid rgba(255,255,255,0.2); box-shadow: 0 0 50px var(--neon); cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 5rem; color: white; transition: transform 0.05s; }
        #main-btn:active { transform: scale(0.9); }

        #tabs { display: flex; background: #0d0d1a; border-top: 1px solid #222; }
        .tab-btn { flex: 1; padding: 15px; border: none; color: #555; background: none; font-size: 0.7rem; font-weight: bold; text-transform: uppercase; }
        .tab-btn.active { color: var(--neon); border-bottom: 3px solid var(--neon); background: rgba(0,242,255,0.05); }

        .panel-container { flex: 1; overflow-y: auto; padding: 15px; background: #080810; }
        .panel { display: none; flex-direction: column; gap: 10px; padding-bottom: 40px; }
        .panel.active { display: flex; }
        
        .card { background: rgba(255, 255, 255, 0.04); padding: 12px; border-radius: 12px; display: flex; justify-content: space-between; align-items: center; border: 1px solid rgba(255,255,255,0.08); }
        .buy-btn { background: var(--panel); border: 2px solid var(--neon); color: var(--neon); padding: 8px 12px; border-radius: 6px; font-weight: bold; }
        
        input, textarea { background: #1a1a35; border: 1px solid #333; color: white; padding: 10px; border-radius: 8px; width: 100%; margin: 10px 0; font-family: inherit; }
        textarea { height: 80px; resize: none; }
        label { font-size: 0.8rem; color: var(--neon); font-weight: bold; display: block; margin-top: 10px; }
        .color-box { height: 45px; border-radius: 8px; border: 2px solid #333; cursor: pointer; }

        /* SWITCH SON */
        .switch-container { display: flex; align-items: center; justify-content: space-between; background: rgba(255,255,255,0.05); padding: 10px; border-radius: 8px; margin-top: 10px; }
    </style>
</head>
<body id="game-body">

    <div id="header">
        <div id="settings-btn" onclick="showTab(null, 'config')">⚙️</div>
        <div id="money">0 €</div>
        <div style="font-size: 0.75rem; color: var(--gold);"><span id="display-name">Hacker</span></div>
    </div>

    <div id="click-area">
        <div id="prestige-container"><div id="prestige-bar"></div></div>
        <button id="main-btn" onclick="handleMainClick(event)">$</button>
    </div>

    <div id="tabs">
        <button id="tab-upgrades" class="tab-btn active" onclick="showTab(event, 'upgrades')">Shop</button>
        <button id="tab-leaderboard" class="tab-btn" onclick="showTab(event, 'leaderboard')">Top</button>
        <button id="tab-prestige" class="tab-btn" onclick="showTab(event, 'prestige')">Reset</button>
    </div>

    <div class="panel-container">
        <div id="upgrades" class="panel active"></div>
        <div id="leaderboard" class="panel"><h3 style="color: var(--gold);">CLASSEMENT MONDIAL</h3><div id="rank-content"></div></div>

        <div id="config" class="panel">
            <h3 style="color: var(--neon); margin: 0;">PROFIL & AUDIO</h3>
            
            <label>PSEUDO :</label>
            <input type="text" id="name-input" maxlength="12" onchange="updateName(this.value)">

            <div class="switch-container">
                <span>EFFETS SONORES</span>
                <button id="sound-toggle" class="buy-btn" onclick="toggleSound()">ON</button>
            </div>
            
            <label>THÈMES :</label>
            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;">
                <div class="color-box" style="background:#00f2ff" onclick="setTheme('default')"></div>
                <div class="color-box" style="background:#ff4757" onclick="setTheme('red')"></div>
                <div class="color-box" style="background:#ffd700" onclick="setTheme('yellow')"></div>
                <div class="color-box" style="background:linear-gradient(135deg, #ff6a00, #ee0979)" onclick="setTheme('flame')"></div>
                <div class="color-box" style="background:linear-gradient(135deg, #000, #2ecc71)" onclick="setTheme('matrix')"></div>
            </div>

            <h3 style="color: var(--gold); margin-top: 25px;">SUPPORT CONTACT</h3>
            <textarea id="support-msg" placeholder="Signaler un bug..."></textarea>
            <button class="buy-btn" style="width: 100%; border-color: var(--gold); color: var(--gold);" onclick="sendEmail()">ENVOYER MA REQUÊTE</button>
        </div>

        <div id="prestige" class="panel">
            <div style="text-align: center; padding: 20px; border: 2px solid var(--gold); border-radius: 15px;">
                <button id="rebirth-btn" class="buy-btn" style="width: 100%;" onclick="doRebirth()">LOCKED</button>
            </div>
        </div>
    </div>

<script>
    let audioCtx = null;
    let state = { money: 0, multiplier: 1.0, goal: 10000, theme: 'default', name: 'Hacker', soundOn: true };
    const upgs = [
        { name: 'Clavier Zen', cost: 20, base: 20, power: 1, type: 'click', count: 0 },
        { name: 'Bot Auto', cost: 300, base: 300, power: 2, type: 'auto', count: 0 },
        { name: 'Proxy Hack', cost: 2000, base: 2000, power: 15, type: 'auto', count: 0 }
    ];

    function playZenSound(f) {
        if (!state.soundOn) return;
        if (!audioCtx)

