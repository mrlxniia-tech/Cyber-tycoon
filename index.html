<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Cyber Tycoon Master V2.5</title>
    <link rel="icon" type="image/png" href="icon.png">
    <style>
        :root { --neon: #00f2ff; --bg: #050508; }
        .theme-green { --neon: #2ecc71; } .theme-red { --neon: #ff4757; } .theme-gold { --neon: #ffd700; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0; padding: 0; }
        body { background: var(--bg); color: white; font-family: 'Courier New', monospace; height: 100vh; overflow: hidden; transition: 0.3s; }
        #matrix { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; opacity: 0.15; }
        
        /* HEADER */
        #h { height: 120px; background: rgba(17,17,34,0.9); border-bottom: 2px solid var(--neon); display: flex; flex-direction: column; align-items: center; justify-content: center; box-shadow: 0 0 15px var(--neon); }
        #m { font-size: 2rem; font-weight: bold; color: var(--neon); text-shadow: 0 0 10px var(--neon); }
        
        /* CLICK ZONE */
        #cz { height: 30vh; display: flex; align-items: center; justify-content: center; }
        #btn { width: 130px; height: 130px; border-radius: 50%; background: #111; border: 4px solid var(--neon); color: var(--neon); font-size: 4rem; box-shadow: 0 0 20px var(--neon); transition: 0.05s; }
        #btn:active { transform: scale(0.9); }

        /* UI AREA */
        #ui { height: calc(70vh - 120px); background: rgba(8,8,16,0.98); border-top: 1px solid #333; display: flex; flex-direction: column; }
        #nav { display: flex; height: 50px; background: #000; }
        .t-btn { flex: 1; border: none; background: none; color: #555; font-weight: bold; font-size: 0.65rem; }
        .t-btn.active { color: var(--neon); border-bottom: 3px solid var(--neon); }
        
        .p { flex: 1; overflow-y: auto; padding: 15px; display: none; padding-bottom: 60px; }
        .p.active { display: block; }
        .card { background: rgba(255,255,255,0.05); padding: 12px; border-radius: 10px; margin-bottom: 10px; border: 1px solid #222; }
        .b-btn { width: 100%; background: var(--neon); color: #000; border: none; padding: 10px; border-radius: 5px; font-weight: bold; margin-top: 5px; cursor: pointer; }
        .b-btn:disabled { background: #333; color: #666; }

        /* SPECIALS */
        .quest-item { border-left: 4px solid var(--neon); margin-bottom: 10px; padding: 10px; background: rgba(0,242,255,0.05); }
        .theme-box { display: inline-block; width: 40px; height: 40px; border-radius: 5px; margin: 5px; border: 2px solid white; }
    </style>
</head>
<body id="b">
    <canvas id="matrix"></canvas>

    <div id="h">
        <div id="m">0 €</div>
        <div id="income-bar" style="font-size: 0.8rem; color: #2ecc71;">+0 €/s</div>
        <div style="font-size: 0.6rem; color: #888; margin-top: 5px;">HACKER: <span id="dn">...</span> | XP: <span id="xp">0</span></div>
    </div>

    <div id="cz"><button id="btn" onclick="tap()">$</button></div>

    <div id="ui">
        <div id="nav">
            <button class="t-btn active" onclick="tab(event, 's')">HARDWARE</button>
            <button class="t-btn" onclick="tab(event, 'q')">QUÊTES</button>
            <button class="t-btn" onclick="tab(event, 't')">RÉSEAU</button>
            <button class="t-btn" onclick="tab(event, 'c')">SYSTEM</button>
        </div>

        <div id="s" class="p active"></div>

        <div id="q" class="p">
            <h3 style="color:var(--neon)">CONTRATS EN COURS</h3>
            <div id="quest-list"></div>
        </div>

        <div id="t" class="p">
            <h3 style="color:var(--neon)">CLASSEMENT MONDIAL</h3>
            <div id="leaderboard"></div>
        </div>

        <div id="c" class="p">
            <h3>PERSONNALISATION</h3>
            <div class="card">
                <p>Thème de l'interface :</p>
                <div class="theme-box" style="background:#00f2ff" onclick="setTheme('')"></div>
                <div class="theme-box" style="background:#2ecc71" onclick="setTheme('theme-green')"></div>
                <div class="theme-box" style="background:#ff4757" onclick="setTheme('theme-red')"></div>
                <div class="theme-box" style="background:#ffd700" onclick="setTheme('theme-gold')"></div>
            </div>
            <div class="card">
                <p>Stats : Clics <b id="st-c">0</b></p>
                <button class="b-btn" style="background:#444; color:white;" onclick="reset()">RESET SYSTEM</button>
            </div>
        </div>
    </div>

    <script>
        let g = { m: 0, n: "Hacker", items: [0,0,0,0], xp: 0, tc: 0, theme: "" };
        const data = [
            { n: "Script Python", c: 15, p: 1 },
            { n: "Serveur Rack", c: 200, p: 10 },
            { n: "IA Hack", c: 1500, p: 50 },
            { n: "Mainframe God", c: 10000, p: 250 }
        ];
        const quests = [
            { n: "Premier pas", target: 100, type: "m", reward: 50, done: false },
            { n: "Cliqueur fou", target: 50, type: "c", reward: 200, done: false },
            { n: "Investisseur", target: 10, type: "i", reward: 500, done: false }
        ];

        window.onload = () => {
            let s = localStorage.getItem('CyberMasterV25');
            if(s) g = JSON.parse(s);
            if(!g.n || g.n === "Hacker") g.n = prompt("Nom de code, Hacker ?") || "User"+Math.floor(Math.random()*999);
            setTheme(g.theme);
            update();
            setInterval(loop, 1000);
            startMatrix();
        };

        function tap() { g.m += 1; g.tc++; update(); save(); }

        function buy(i) {
            let cost = Math.floor(data[i].c * Math.pow(1.5, g.items[i]));
            if(g.m >= cost) {
                g.m -= cost; g.items[i]++;
                update(); save();
            }
        }

        function loop() {
            let ips = 0;
            g.items.forEach((q, i) => ips += q * data[i].p);
            g.m += ips;
            update();
        }

        function update() {
            document.getElementById('m').innerText = Math.floor(g.m).toLocaleString() + " €";
            document.getElementById('dn').innerText = g.n;
            document.getElementById('xp').innerText = g.xp;
            document.getElementById('st-c').innerText = g.tc;

            // Shop
            let sh = "";
            data.forEach((d, i) => {
                let cost = Math.floor(d.c * Math.pow(1.5, g.items[i]));
                sh += `<div class="card"><b>${d.n}</b> (x${g.items[i]})<br><button class="b-btn" ${g.m < cost ? 'disabled' : ''} onclick="buy(${i})">${cost} €</button></div>`;
            });
            document.getElementById('s').innerHTML = sh;

            // Quêtes
            let qh = "";
            quests.forEach(q => {
                let cur = q.type === "m" ? g.m : (q.type === "c" ? g.tc : g.items.reduce((a,b)=>a+b));
                if(cur >= q.target && !q.done) { q.done = true; g.m += q.reward; alert("Quête finie : "+q.n); }
                qh += `<div class="quest-item"><b>${q.n}</b><br><small>${cur}/${q.target} - Récompense: ${q.reward}€</small> [${q.done?'OK':'...'}]</div>`;
            });
            document.getElementById('quest-list').innerHTML = qh;

            // Leaderboard
            let players = [{n:"Satoshi", m:1000000}, {n:"AcidBurn", m:50000}, {n:g.n, m:g.m}].sort((a,b)=>b.m-a.m);
            let th = "";
            players.forEach((p, i) => th += `<div class="card" style="${p.n==g.n?'border:1px solid var(--neon)':''}">#${i+1} ${p.n} - ${Math.floor(p.m).toLocaleString()}€</div>`);
            document.getElementById('leaderboard').innerHTML = th;
        }

        function setTheme(t) { g.theme = t; document.getElementById('b').className = t; save(); }
        function save() { localStorage.setItem('CyberMasterV25', JSON.stringify(g)); }
        function reset() { if(confirm("Supprimer ?")) { localStorage.clear(); location.reload(); } }
        function tab(e, id) { 
            document.querySelectorAll('.p').forEach(x => x.classList.remove('active'));
            document.querySelectorAll('.t-btn').forEach(x => x.classList.remove('active'));
            document.getElementById(id).classList.add('active'); e.target.classList.add('active');
        }
        function startMatrix() { /* Matrix Code... */ }
    </script>
</body>
</html>
