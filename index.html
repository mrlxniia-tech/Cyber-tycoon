<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Cyber Tycoon FIX</title>
    <style>
        :root { --neon: #00f2ff; --bg: #050508; }
        .theme-flame { --neon: #ff6a00; }
        
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body { 
            margin: 0; background: #050508; color: white; 
            font-family: sans-serif; overflow: hidden; height: 100vh;
            display: flex; flex-direction: column;
        }

        /* HEADER */
        #header { height: 70px; background: #111122; border-bottom: 2px solid var(--neon); display: flex; align-items: center; justify-content: center; position: relative; }
        #money { font-size: 2rem; font-weight: bold; color: var(--neon); }
        #set-btn { position: absolute; right: 15px; font-size: 1.5rem; cursor: pointer; z-index: 100; }

        /* ZONE BOUTON - AUCUNE SUPERPOSITION ICI */
        #game-zone { 
            flex: 1; display: flex; align-items: center; justify-content: center; 
            position: relative; background: radial-gradient(circle, #111 0%, #000 100%);
        }

        #main-btn {
            width: 180px; height: 180px; border-radius: 50%;
            background: linear-gradient(135deg, var(--neon), #0066ff);
            border: 5px solid white; color: white; font-size: 5rem;
            cursor: pointer; box-shadow: 0 0 30px var(--neon);
            display: flex; align-items: center; justify-content: center;
            z-index: 10; position: relative; /* Indispensable */
        }
        #main-btn:active { transform: scale(0.95); }

        /* PANNEAUX ET ONGLETS */
        #ui-area { height: 35vh; background: #080810; display: flex; flex-direction: column; border-top: 2px solid #222; }
        #tabs { display: flex; height: 50px; background: #000; }
        .tab { flex: 1; border: none; background: none; color: #444; font-weight: bold; cursor: pointer; border-bottom: 2px solid transparent; }
        .tab.active { color: var(--neon); border-bottom: 2px solid var(--neon); }

        .content { flex: 1; overflow-y: auto; padding: 15px; display: none; }
        .content.active { display: block; }

        .item { background: #1a1a33; padding: 10px; border-radius: 10px; margin-bottom: 8px; display: flex; justify-content: space-between; align-items: center; }
        .btn-buy { background: var(--neon); color: black; border: none; padding: 8px 12px; border-radius: 5px; font-weight: bold; }
        
        input { width: 100%; padding: 10px; margin: 10px 0; background: #000; color: #fff; border: 1px solid var(--neon); }
    </style>
</head>
<body id="b">

    <div id="header">
        <div id="money">0 €</div>
        <div id="set-btn" onclick="openP('config')">⚙️</div>
    </div>

    <div id="game-zone">
        <button id="main-btn" onclick="tap()">$</button>
    </div>

    <div id="ui-area">
        <div id="tabs">
            <button class="tab active" onclick="openP('shop', event)">SHOP</button>
            <button class="tab" onclick="openP('top', event)">TOP</button>
            <button class="tab" onclick="openP('config', event)">SET</button>
        </div>

        <div id="shop" class="content active"></div>
        
        <div id="top" class="content">
            <h3>CLASSEMENT</h3>
            <div class="item"><span>Anonymous_99</span><span>1.2M €</span></div>
            <div class="item"><span id="p-name">Toi</span><span id="p-money">0 €</span></div>
        </div>

        <div id="config" class="content">
            <h3>SETTINGS</h3>
            <input type="text" placeholder="Ton pseudo" onchange="game.name=this.value; save();">
            <button class="btn-buy" style="width:100%; margin-top:10px;" onclick="setT('flame')">Thème Flamme</button>
            <button class="btn-buy" style="width:100%; margin-top:10px; background:#444; color:white;" onclick="game.sound=!game.sound; this.innerText=game.sound?'SON: ON':'SON: OFF'">SON: ON</button>
            <hr>
            <button class="btn-buy" style="width:100%; background:gold" onclick="window.location.href='mailto:Mrlxniia@gmail.com'">SUPPORT MAIL</button>
        </div>
    </div>

    <script>
        // DATA
        let game = { money: 0, name: "Hacker", theme: "default", sound: true };
        let items = [{n:"Clavier", c:20, p:1, q:0}, {n:"Bot", c:300, p:5, q:0}];

        // CLIC PRINCIPAL
        function tap() {
            let power = 1;
            items.forEach(i => { if(i.n=="Clavier") power += i.q * i.p; });
            game.money += power;
            if(game.sound) beep();
            draw();
        }

        // ACHAT
        function buy(idx) {
            if(game.money >= items[idx].c) {
                game.money -= items[idx].c;
                items[idx].q++;
                items[idx].c = Math.floor(items[idx].c * 1.5);
                draw();
            }
        }

        // UI
        function draw() {
            document.getElementById('money').innerText = game.money.toLocaleString() + " €";
            document.getElementById('p-money').innerText = game.money.toLocaleString() + " €";
            document.getElementById('p-name').innerText = game.name;
            
            let html = "";
            items.forEach((it, i) => {
                html += `<div class="item">
                    <span>${it.n} (x${it.q})<br><small>${it.c}€</small></span>
                    <button class="btn-buy" onclick="buy(${i})">ACHETER</button>
                </div>`;
            });
            document.getElementById('shop').innerHTML = html;
            save();
        }

        // ONGLETS
        function openP(id, e) {
            document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            if(e) e.target.classList.add('active');
        }

        // THEME
        function setT(t) { game.theme=t; document.getElementById('b').className="theme-"+t; save(); }

        // AUDIO
        function beep() {
            let ctx = new (window.AudioContext || window.webkitAudioContext)();
            let o = ctx.createOscillator(); let g = ctx.createGain();
            o.type = "sine"; o.frequency.value = 400;
            g.gain.setValueAtTime(0.1, ctx.currentTime);
            g.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.1);
            o.connect(g); g.connect(ctx.destination);
            o.start(); o.stop(ctx.currentTime + 0.1);
        }

        // SAVE
        function save() { localStorage.setItem('CT_FIX', JSON.stringify({game, items})); }
        
        window.onload = () => {
            let s = localStorage.getItem('CT_FIX');
            if(s) {
                let d = JSON.parse(s); game = d.game; items = d.items;
                setT(game.theme);
            }
            draw();
            setInterval(() => {
                items.forEach(it => { if(it.n != "Clavier") game.money += (it.q * it.p)/10; });
                draw();
            }, 100);
        };
    </script>
</body>
</html>

