<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Cyber Tycoon V14 - Master</title>
    <style>
        :root { --neon: #00f2ff; --bg: #010103; --card: rgba(10, 10, 15, 0.98); }
        .theme-green { --neon: #00ff41 !important; } .theme-red { --neon: #ff003c !important; } 
        .theme-gold { --neon: #ffcc00 !important; } .theme-purple { --neon: #bc13fe !important; }
        .theme-white { --neon: #ffffff !important; } .theme-welcome { --neon: #0077ff !important; }
        .theme-summer { --neon: #ffaa00 !important; } .theme-memorial { --neon: #aaaaaa !important; }
        .theme-souvenir { --neon: #3366ff !important; }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; font-family: 'Courier New', monospace; outline: none; }
        body { background: var(--bg); color: white; margin: 0; height: 100vh; display: flex; flex-direction: column; overflow: hidden; user-select: none; transition: background 0.5s; }
        #matrix { position: fixed; inset: 0; z-index: -1; opacity: 0.2; }

        header { height: 130px; flex-shrink: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; border-bottom: 2px solid var(--neon); background: var(--card); z-index: 10; box-shadow: 0 0 15px var(--neon); }
        #money { font-size: 2rem; font-weight: bold; color: var(--neon); text-shadow: 0 0 10px var(--neon); }
        
        #game-area { flex-grow: 1; display: flex; align-items: center; justify-content: center; position: relative; cursor: pointer; z-index: 5; }
        #main-btn { width: 120px; height: 120px; border-radius: 50%; border: 4px solid var(--neon); background: rgba(0,0,0,0.6); color: var(--neon); font-size: 3rem; transition: 0.1s; display: flex; align-items: center; justify-content: center; pointer-events: none; box-shadow: 0 0 15px var(--neon); }
        .btn-active { transform: scale(0.9); box-shadow: 0 0 30px var(--neon) !important; }

        #event-timer { position: fixed; top: 140px; right: 10px; background: var(--neon); color: black; padding: 5px 12px; border-radius: 20px; font-size: 0.7rem; font-weight: bold; z-index: 100; display: none; }

        nav { display: flex; background: #000; height: 65px; border-top: 1px solid #333; flex-shrink: 0; z-index: 100; }
        .nav-btn { flex: 1; border: none; background: none; color: #444; font-size: 0.65rem; font-weight: bold; }
        .nav-btn.active { color: var(--neon); border-bottom: 4px solid var(--neon); background: rgba(255,255,255,0.05); }

        .panel { flex-grow: 1; overflow-y: auto; padding: 15px; display: none; }
        .panel.active { display: block; }
        .content-wrapper { padding-bottom: 160px; }

        .card { background: rgba(255,255,255,0.05); border: 1px solid #222; padding: 15px; margin-bottom: 15px; border-radius: 10px; border-left: 4px solid var(--neon); }
        .buy-btn { background: var(--neon); color: black; border: none; padding: 12px; font-weight: bold; border-radius: 6px; width: 100%; margin-top: 8px; cursor: pointer; transition: 0.2s; }
        .buy-btn:disabled { background: #222 !important; color: #555 !important; cursor: not-allowed; opacity: 0.5; }
        
        .sys-tabs { display: flex; gap: 6px; margin-bottom: 15px; }
        .s-tab { flex: 1; background: #111; border: 1px solid #333; color: #777; padding: 10px; font-size: 0.6rem; border-radius: 6px; }
        .s-tab.active { border-color: var(--neon); color: var(--neon); background: rgba(0,242,255,0.1); }

        #hack-ui { position: fixed; inset: 0; background: rgba(150,0,0,0.98); z-index: 20000; display: none; flex-direction: column; align-items: center; justify-content: center; }
        #hack-bar-bg { width: 80%; height: 40px; background: #000; border: 3px solid #fff; margin: 25px; border-radius: 20px; overflow: hidden; }
        #hack-bar-fill { width: 50%; height: 100%; background: #00f2ff; transition: 0.1s; box-shadow: 0 0 20px #00f2ff; }

        .floating-text { position: absolute; color: var(--neon); font-weight: bold; pointer-events: none; animation: floatUp 0.7s ease-out forwards; z-index: 1000; font-size: 1.2rem; }
        @keyframes floatUp { from { transform: translateY(0); opacity: 1; } to { transform: translateY(-100px); opacity: 0; } }
        .color-dot { width: 35px; height: 35px; border-radius: 50%; border: 2px solid #fff; display: inline-block; margin: 8px; cursor: pointer; }
    </style>
</head>
<body id="b-tag">
    <canvas id="matrix"></canvas>
    <div id="event-timer">ALERT</div>

    <div id="hack-ui">
        <h1 style="color:white; margin:0; text-align:center; font-size:2rem; text-shadow: 0 0 20px #000;">‚ö†Ô∏è ATTACK DETECTED ‚ö†Ô∏è</h1>
        <div id="hack-bar-bg"><div id="hack-bar-fill"></div></div>
        <button onclick="hackTap()" style="width:160px; height:160px; border-radius:50%; background:white; color:red; border:8px solid #000; font-weight:bold; font-size:1.8rem; box-shadow: 0 0 30px #fff;">DEFEND</button>
    </div>

    <header>
        <div id="money">0 ‚Ç¨</div>
        <div style="display:flex; gap:15px; font-size:0.8rem; font-weight:bold;">
            <span id="ips-display" style="color:#00ff41;">+0 ‚Ç¨/s</span>
            <span id="click-val" style="color:var(--neon);">Clic: 1‚Ç¨</span>
        </div>
        <div style="font-size:0.6rem; color:#666; margin-top:8px;">ID: <span id="h-name">---</span> | PRESTIGE: <span id="rb-val">0</span></div>
    </header>

    <div id="game-area" onmousedown="tap(event)" ontouchstart="tap(event)">
        <div id="main-btn">$</div>
    </div>

    <nav>
        <button class="nav-btn active" onclick="tab(event, 'shop')">SHOP</button>
        <button class="nav-btn" onclick="tab(event, 'quest')">QU√äTES</button>
        <button class="nav-btn" onclick="tab(event, 'rank')">R√âSEAU</button>
        <button class="nav-btn" onclick="tab(event, 'config')">SYSTEM</button>
    </nav>

    <div id="shop" class="panel active">
        <div class="content-wrapper">
            <div class="sys-tabs">
                <button class="s-tab active" onclick="setBuyM(1, this)">x1</button>
                <button class="s-tab" onclick="setBuyM(5, this)">x5</button>
                <button class="s-tab" onclick="setBuyM(10, this)">x10</button>
            </div>
            <div id="shop-list"></div>
        </div>
    </div>

    <div id="quest" class="panel"><div class="content-wrapper" id="quest-list"></div></div>
    <div id="rank" class="panel"><div class="content-wrapper" id="rank-list"></div></div>

    <div id="config" class="panel">
        <div class="content-wrapper">
            <div class="sys-tabs">
                <button class="s-tab active" onclick="subTab('sys-prof', this)">PROFIL</button>
                <button class="s-tab" onclick="subTab('sys-param', this)">PARAM√àTRES</button>
                <button class="s-tab" onclick="subTab('sys-stats', this)">STATS</button>
                <button id="admin-tab-btn" class="s-tab" onclick="subTab('sys-admin', this)" style="display:none; color: #ff00ff; border-color:#ff00ff;">ADMIN</button>
            </div>

            <div id="sys-prof" class="sub-panel">
                <div class="card">
                    <p style="font-size:0.8rem; margin:0 0 10px 0;">IDENTITY</p>
                    <input type="text" id="name-change" placeholder="Hacker Name" maxlength="12" style="width:100%; background:#000; color:white; border:1px solid #333; padding:12px; margin-bottom:12px;">
                    <button class="buy-btn" onclick="changeName()">UPDATE NAME</button>
                    <p style="font-size:0.8rem; margin:15px 0 10px 0;">INTERFACE COLORS</p>
                    <div style="text-align: center;">
                        <div class="color-dot" style="background:#00f2ff" onclick="setTh('')"></div>
                        <div class="color-dot" style="background:#00ff41" onclick="setTh('theme-green')"></div>
                        <div class="color-dot" style="background:#ff003c" onclick="setTh('theme-red')"></div>
                        <div class="color-dot" style="background:#ffcc00" onclick="setTh('theme-gold')"></div>
                        <div class="color-dot" style="background:#bc13fe" onclick="setTh('theme-purple')"></div>
                        <div class="color-dot" style="background:#ffffff" onclick="setTh('theme-white')"></div>
                    </div>
                </div>
                <div class="card">
                    <p style="font-size:0.8rem; margin:0;">REBIRTH SYSTEM</p>
                    <button class="buy-btn" id="rb-btn" onclick="doRebirth()" disabled>LANCER RB (<span id="rb-cost">1.00</span>M ‚Ç¨)</button>
                </div>
            </div>

            <div id="sys-param" class="sub-panel" style="display:none;">
                <div class="card">
                    <p style="font-size:0.8rem; margin-bottom:10px;">SOCIAL NETWORK</p>
                    <input type="text" id="friend-id-in" placeholder="Paste Friend ID" style="width:100%; background:#000; color:white; border:1px solid var(--neon); padding:10px; margin-bottom:10px;">
                    <button class="buy-btn" onclick="addFriend()">ADD FRIEND</button>
                    <button class="buy-btn" onclick="copyMyId()" style="background:#333; color:white; margin-top:8px;">COPY MY ID</button>
                </div>
                <div class="card">
                    <button class="buy-btn" onclick="toggleSound()" id="sound-btn">SOUND : ON</button>
                    <button class="buy-btn" onclick="window.location.href='mailto:Mrlxniia@gmail.com'" style="background:#222; color:var(--neon); border:1px solid var(--neon); margin-top:8px;">SUPPORT ADMIN</button>
                </div>
                <button onclick="resetGame()" style="width:100%; background:none; border:1px solid red; color:red; padding:12px; font-size:0.7rem; font-weight:bold;">ERASE ALL DATA</button>
            </div>

            <div id="sys-stats" class="sub-panel" style="display:none;">
                <div class="card">
                    <p>Total Taps: <span id="st-clicks" style="color:var(--neon);">0</span></p>
                    <p>Attacks Won: <span id="st-win" style="color:#00ff41;">0</span></p>
                    <p>Attacks Lost: <span id="st-loss" style="color:#ff003c;">0</span></p>
                    <p>Life Earnings: <span id="st-total" style="color:var(--neon);">0</span> ‚Ç¨</p>
                </div>
            </div>

            <div id="sys-admin" class="sub-panel" style="display:none;">
                <div class="card" style="border-left-color: #ff00ff;">
                    <p style="color:#ff00ff; font-weight:bold; margin-bottom:10px;">MRLX CONSOLE</p>
                    <button class="buy-btn admin-btn" style="background:#ff00ff; color:white;" onclick="startHackFight()">FORCE HACK EVENT</button>
                    <button class="buy-btn admin-btn" style="background:#ff00ff; color:white;" onclick="g.m += 10000000; render();">CHEAT +10M ‚Ç¨</button>
                    <button class="buy-btn admin-btn" style="background:#ff00ff; color:white;" onclick="forceEvent('easter')">MODE EASTER (x8)</button>
                    <button class="buy-btn admin-btn" style="background:#ff00ff; color:white;" onclick="forceEvent('memorial')">MODE 9/11</button>
                    <button class="buy-btn admin-btn" style="background:#000; color:white;" onclick="location.reload()">RELOAD APP</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let g = { m: 0, n: "Hacker", items: [0,0,0,0,0,0,0,0], rb: 0, th: "", firstLogin: Date.now(), lastHack: Date.now(), lastSave: Date.now(), s_click: 0, s_win: 0, s_loss: 0, s_total: 0, sound: true, friends: [], q: [false,false,false,false,false,false] };
        let buyM = 1; let AC; let hackPower = 50; let hackInterval; let dateMult = 1; let forcedEv = null;

        const items = [
            {n:"CPU Overclock",c:50,p:2,click:true}, {n:"Script Auto",c:40,p:1}, {n:"Proxy Tunnel",c:300,p:15},
            {n:"Mining Cell",c:3000,p:90}, {n:"Mainframe",c:40000,p:800}, {n:"Neural Grid",c:200000,p:4500},
            {n:"Quantum PC",c:1500000,p:25000}, {n:"Satellite",c:25000000,p:150000}
        ];

        function playSfx(f, type='square', vol=0.03, dur=0.1) {
            if(!g.sound) return;
            try { if(!AC) AC = new AudioContext(); let o=AC.createOscillator(), gn=AC.createGain(); o.type=type; o.frequency.value=f; gn.gain.setValueAtTime(vol, AC.currentTime); gn.gain.exponentialRampToValueAtTime(0.0001, AC.currentTime+dur); o.connect(gn); gn.connect(AC.destination); o.start(); o.stop(AC.currentTime+dur); } catch(e){}
        }

        function playAlarm() {
            let i = 0;
            let alarm = setInterval(() => {
                if(document.getElementById('hack-ui').style.display === 'none') { clearInterval(alarm); return; }
                playSfx(i % 2 === 0 ? 900 : 600, 'sawtooth', 0.05, 0.4);
                i++;
            }, 500);
        }

        function checkDates() {
            if(forcedEv) return;
            const now = new Date(), m = now.getMonth(), d = now.getDate(), b = document.getElementById('b-tag'), btn = document.getElementById('main-btn'), timer = document.getElementById('event-timer');
            let ev = false; dateMult = 1; timer.style.display = "none";

            let welcomeLeft = 900000 - (Date.now() - g.firstLogin);
            if (welcomeLeft > 0) { 
                b.className = "theme-welcome"; dateMult = 2; ev = true; 
                timer.style.display = "block"; timer.innerText = "WELCOME x2: " + Math.floor(welcomeLeft/1000) + "s";
            }
            else if (m === 3 && d >= 18 && d <= 20) { b.className = "theme-gold"; btn.innerText = "ü•ö"; dateMult = 8; ev = true; }
            else if (m >= 5 && m <= 7) { b.className = "theme-summer"; btn.innerText = "‚òÄÔ∏è"; ev = true; }
            else if (m === 8 && d === 11) { b.className = "theme-memorial"; btn.innerText = "üïäÔ∏è"; ev = true; }
            else if (m === 10 && d === 11) { b.className = "theme-souvenir"; btn.innerText = "üïØÔ∏è"; ev = true; }
            
            if(!ev) { b.className = g.th; btn.innerText = "$"; }
            checkAdmin();
        }

        window.onload = () => {
            let s = localStorage.getItem('CT_ULTIMATE_V14');
            if(s) {
                g = JSON.parse(s);
                let idle = Math.floor((Date.now() - g.lastSave) / 1000);
                if(idle > 10) {
                    let ips=0; g.items.forEach((q,i)=>{if(i>0)ips+=q*items[i].p;});
                    let gain = ips * Math.max(1, g.rb*2) * idle;
                    if(gain > 0) { g.m += gain; g.s_total += gain; setTimeout(()=>alert(`RAPPORTS BOTS : +${Math.floor(gain).toLocaleString()} ‚Ç¨ r√©colt√©s !`), 500); }
                }
            }
            checkDates(); render(); startMatrix(); setInterval(tick, 1000);
        };

        function tick() {
            let ips=0; g.items.forEach((q,i)=>{if(i>0)ips+=q*items[i].p;});
            let profit = ips * Math.max(1, g.rb*2);
            g.m += profit; g.s_total += profit;
            if(Date.now() - g.lastHack > 28800000) startHackFight();
            if(!forcedEv) checkDates(); 
            save(); render();
        }

        function save() { g.lastSave = Date.now(); localStorage.setItem('CT_ULTIMATE_V14', JSON.stringify(g)); }

        function tap(e) {
            e.preventDefault();
            let val = (1 + (g.items[0]*4*dateMult)) * (Math.max(1, g.rb*2));
            g.m += val; g.s_total += val; g.s_click++;
            
            const btn = document.getElementById('main-btn'); btn.classList.add('btn-active'); setTimeout(()=>btn.classList.remove('btn-active'), 100);
            
            let d = document.createElement('div'); d.className='floating-text';
            let x = e.clientX || (e.touches ? e.touches[0].clientX : window.innerWidth/2);
            let y = e.clientY || (e.touches ? e.touches[0].clientY : window.innerHeight/2);
            d.style.left=x+'px'; d.style.top=y+'px'; d.innerText="+"+Math.floor(val)+"‚Ç¨";
            document.body.appendChild(d); setTimeout(()=>d.remove(), 600);
            
            playSfx(400 + Math.random()*100); render();
        }

        function render() {
            let multi = Math.max(1, g.rb*2); let rbCost = 1000000 * Math.pow(5, g.rb);
            document.getElementById('money').innerText = Math.floor(g.m).toLocaleString() + " ‚Ç¨";
            let ips=0; g.items.forEach((q,i)=>{if(i>0)ips+=q*items[i].p;});
            document.getElementById('ips-display').innerText = "+"+Math.floor(ips*multi).toLocaleString()+" ‚Ç¨/s";
            document.getElementById('click-val').innerText = "Clic: "+Math.floor((1+(g.items[0]*4*dateMult))*multi)+"‚Ç¨";
            document.getElementById('h-name').innerText = g.n; document.getElementById('rb-val').innerText = g.rb;
            document.getElementById('rb-cost').innerText = (rbCost/1000000).toFixed(2);
            document.getElementById('rb-btn').disabled = (g.m < rbCost);
            
            document.getElementById('st-clicks').innerText = g.s_click.toLocaleString();
            document.getElementById('st-win').innerText = g.s_win;
            document.getElementById('st-loss').innerText = g.s_loss;
            document.getElementById('st-total').innerText = Math.floor(g.s_total).toLocaleString();

            let sh = ""; items.forEach((it, i) => {
                let cost = 0; for(let n=0; n<buyM; n++) cost += Math.floor(it.c * Math.pow(1.5, g.items[i]+n));
                sh += `<div class="card"><div style="display:flex; justify-content:space-between;"><b>${it.n}</b><span>x${g.items[i]}</span></div><div style="font-size:0.6rem; color:#888;">${it.click?'+Clics':'+'+it.p+'‚Ç¨/s'}</div><button class="buy-btn" ${g.m < cost ? 'disabled' : ''} onclick="buy(${i})">${cost.toLocaleString()} ‚Ç¨</button></div>`;
            });
            document.getElementById('shop-list').innerHTML = sh;

            let qh = ""; const quests = [
                {n:"Noob Hacker", t:10000, v:g.m}, {n:"Hacker Junior", t:500000, v:g.m}, {n:"Millionnaire", t:1000000, v:g.m},
                {n:"Overclocker", t:25, v:g.items[0]}, {n:"Miner Pro", t:10, v:g.items[3]}, {n:"Quantum God", t:5, v:g.items[6]}
            ];
            quests.forEach((q,i)=>{
                if(q.v >= q.t && !g.q[i]) { g.q[i]=true; g.m += q.t*0.2; playSfx(1000); }
                let progress = Math.min(100, (q.v/q.t)*100);
                qh += `<div class="card" style="opacity:${g.q[i]?0.4:1}"><b>${q.n}</b><br><div style="width:100%; height:4px; background:#222; margin-top:5px;"><div style="width:${progress}%; height:100%; background:var(--neon);"></div></div></div>`;
            });
            document.getElementById('quest-list').innerHTML = qh;

            let lbd = [
                {n:"Satoshi", rb:99, m:9e12}, {n:"Mitnick", rb:50, m:1e9}, {n:"Skynet", rb:20, m:5e8}, 
                {n:g.n, rb:g.rb, m:g.m, me:true}, ...g.friends
            ].sort((a,b)=>b.rb-a.rb || b.m-a.m);
            document.getElementById('rank-list').innerHTML = lbd.map((r,i)=>`<div class="card" style="${r.me?'border-color:var(--neon); background:rgba(0,242,255,0.1)':''}">${i+1}. ${r.n} - RB:${r.rb} | ${Math.floor(r.m).toLocaleString()}‚Ç¨</div>`).join('');
        }

        function startHackFight() {
            hackPower = 50; document.getElementById('hack-ui').style.display='flex';
            playAlarm();
            let speed = Math.random() * 3.5 + 0.5;
            hackInterval = setInterval(() => {
                hackPower -= speed; document.getElementById('hack-bar-fill').style.width = hackPower + "%";
                if(hackPower <= 0) endHack(false);
            }, 100);
        }
        function hackTap() { hackPower += 6; playSfx(200); if(hackPower >= 100) endHack(true); }
        function endHack(win) {
            clearInterval(hackInterval); document.getElementById('hack-ui').style.display='none';
            g.lastHack = Date.now();
            if(win) { let gain = g.m*0.2; g.m+=gain; g.s_win++; alert("WIN! You stole " + Math.floor(gain).toLocaleString() + " ‚Ç¨"); }
            else { let loss = g.m*0.2; g.m-=loss; g.s_loss++; alert("LOSS! Hacker stole " + Math.floor(loss).toLocaleString() + " ‚Ç¨"); }
            save(); render();
        }

        function buy(i) {
            let cost = 0; for(let n=0; n<buyM; n++) cost += Math.floor(items[i].c * Math.pow(1.5, g.items[i]+n));
            if(g.m >= cost) { g.m -= cost; g.items[i] += buyM; playSfx(600); render(); save(); }
        }
        function tab(e, id) { document.querySelectorAll('.panel').forEach(p=>p.classList.remove('active')); document.querySelectorAll('.nav-btn').forEach(b=>b.classList.remove('active')); document.getElementById(id).classList.add('active'); e.currentTarget.classList.add('active'); }
        function subTab(id, btn) { document.querySelectorAll('.sub-panel').forEach(p=>p.style.display='none'); document.querySelectorAll('.s-tab').forEach(b=>b.classList.remove('active')); document.getElementById(id).style.display='block'; btn.classList.add('active'); }
        function changeName() { let n = document.getElementById('name-change').value; if(n.length>1) { g.n=n; checkAdmin(); render(); save(); alert("Updated!"); } }
        function setTh(t) { g.th = t; document.documentElement.style.setProperty('--neon', getComputedStyle(document.body).getPropertyValue('--neon')); checkDates(); save(); }
        function copyMyId() { let id = btoa(g.n + "|" + g.rb + "|" + Math.floor(g.m)); navigator.clipboard.writeText(id); alert("ID Copied!"); }
        function addFriend() { try { let d = atob(document.getElementById('friend-id-in').value).split('|'); g.friends.push({n:d[0], rb:parseInt(d[1]), m:parseInt(d[2])}); render(); save(); } catch(e){alert("Invalid ID");} }
        function checkAdmin() { document.getElementById('admin-tab-btn').style.display = (g.n.toLowerCase() === "mrlx") ? 'block' : 'none'; }
        function toggleSound() { g.sound = !g.sound; document.getElementById('sound-btn').innerText = "SOUND : " + (g.sound?"ON":"OFF"); }
        function setBuyM(m, b) { buyM = m; document.querySelectorAll('.s-tab').forEach(x=>x.classList.remove('active')); b.classList.add('active'); render(); }
        function forceEvent(type) { forcedEv = type; const b = document.getElementById('b-tag'); if(type==='easter'){ b.className="theme-gold"; dateMult=8; } if(type==='memorial'){ b.className="theme-memorial"; dateMult=1; } render(); }
        function doRebirth() { let c = 1000000*Math.pow(5, g.rb); if(g.m>=c) { g.m=0; g.items=g.items.map(()=>0); g.rb++; save(); location.reload(); } }
        function resetGame() { if(confirm("ERASE ALL?")) { localStorage.clear(); location.reload(); } }
        function startMatrix() { const c = document.getElementById('matrix'); const ctx = c.getContext('2d'); c.width = window.innerWidth; c.height = window.innerHeight; const drops = Array(Math.floor(c.width/15)).fill(1); setInterval(() => { ctx.fillStyle = "rgba(0,0,0,0.05)"; ctx.fillRect(0,0,c.width,c.height); ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--neon'); drops.forEach((y, i) => { ctx.fillText(Math.floor(Math.random()*2), i*15, y*15); if(y*15 > c.height && Math.random() > 0.98) drops[i] = 0; drops[i]++; }); }, 50); }
    </script>
</body>
</html>
